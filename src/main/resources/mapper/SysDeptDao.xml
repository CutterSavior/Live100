<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lanjii.biz.admin.system.dao.SysDeptDao">

    <!-- 根据父级ID查询子部门 -->
    <select id="selectChildrenByParentId" parameterType="java.lang.Long" resultType="com.lanjii.biz.admin.system.model.entity.SysDept">
        SELECT * 
        FROM sys_dept 
        WHERE parent_id = #{parentId}
    </select>

    <!-- 根据部门ID查询所有子孙部门（使用ancestors字段） -->
    <select id="selectDescendantsByDeptId" parameterType="java.lang.Long" resultType="com.lanjii.biz.admin.system.model.entity.SysDept">
        SELECT * 
        FROM sys_dept 
        WHERE FIND_IN_SET(#{deptId}, ancestors) > 0
    </select>

</mapper>
